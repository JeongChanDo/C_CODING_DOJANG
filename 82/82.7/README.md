# 기능별로 나누기

지금 main.c 파일 안에 모든 기능이 다 들어가 있습니다.

이렇게 하면 소스 코드가 간단할 때는 괜찭지만 소스 코드가 복잡해지면 기능 추가도 힘들어지고 유지보수도 쉽지 않게 됩니다.

지금까지 구현했던 함수들을 기능별, 용도별로 나누고, 추가로 필요한 함수를 더 구현해보겠습니다.

먼저 실행 파일에 명령을 지정했을 때 호출할 함수들입니다.

- 파일 추가
- 파일 목록 출력
- 파일 추출

main 함수에 들어있던 초기화 및 메모리 해제 코드를 분리하고, 파일 중복 추가를 방지하기 위한 함수도 필요합니다.

- 초기화 함수
- 종료 함수
- 아카이브에 특정 파일이 있는지 검사하는 함수

마지막으로 파일 아카이브 기능과 직접적인 관련이 없는 공통 함수는 따로 분리합니다.

- 파일 크기를 구하는 함수

지금까지 설명한 함수들을 다음과 같이 각 파일에 넣겠습니다.

### 함수별 파일 분류

#### archive.c/h
- initialize : 아카이브 파일을 열어 매직 넘버와 파일 버전을 검사하고, 목록을 만듭니다.
- finalize : 프로그램 종료 전에 각종 구조체 메모리를 해제하고 아카이브 파일을 닫습니다.
- isExist : 아카이브에 특정 파일이 있는지 검사합니다.

#### command.c/h
- append : 아카이브에 파일을 추가합니다.
- list : 아카이브의 파일 목록을 출력합니다.
- extract : 아카이브에서 파일을 추출합니다.

#### file.c/h
- getFileSize : 파일 크기를 구합니다.

#### main.c
- main : 메인 함수입니다.

