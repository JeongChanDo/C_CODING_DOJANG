# 82.5 파일 목록 출력하기

이번에는 아카이브 파일 안에 들어있는 파일 목록을 출력해보겠습니다.
파일 목록 관리에는 여러 방법이 있지만, 이번 예제에서는 연결 리스트로 구현해보겠습니다.

다음은 아카이브 파일에서 파일 목록을 출력하는 과정입니다.

### 아카이브 파일에서 파일목록을 출력하는 과정
1. 아카이브 파일 열기
2. 아카이브 헤더 읽기
3. 매직 넘버 검사
4. 파일 버전 검사
5. 파일 정보를 읽어서 연결리스트에 추가
6. 파일 목록 출력   <-> 연결리스트를 순회하면서 파일 이름 출력
(list)
7. 연결 리스트 메모리 해제
8. 아카이브 파일 닫기

먼저 다음과 같이 파일 노드(FILE_NODE) 구조체가 필요합니다. 이 구조체는 파일 정보를 연결리스트에 저장해서 파일 목록을 관리하기 위한 구조체입니다. (FILE_NODE 구조체는 ARCHIVE 구조체와 마찬가지로 아카이브 파일에는 저장되지 않고 프로그램에서 데이터를 다룰 때만 사용합니다.) FILE_NODE는 연결 리스트의 노드이므로 다음 노드의 주소를 저장할 포인터와 파일 저장 구조체 FILE_DESC를 멤버로 가지고 있습니다.

``` c
// 프로그램에서만 사용하는 구조체
typedef struct _FILE_NODE {		//파일 목록 연결 리스트 구조체 정의
	struct _FILE_NODE *next;	//다음 노드의 주소를 저장할 포인터
	FILE_DESC desc;				//파일 정보
} FILE_NODE, *PFILE_NODE;
```

ARCHIVE 구조체는 다음과 같이 파일 목록 연결 리스트의 머리 노드를 멤버로 추가해 줍니다.
이렇게 하면 필요할 때마다 파일 목록을 확인할 수 있습니다.

``` c
//프로그램에서만 사용하는 구조체
typedef struct _ARCHIVE {	//아카이브 메인 구조체
	ARCHIVE_HEADER header;	//아카이브 헤더
	FILE *fp;				//아카이브 파일 포인터
	FILE_NODE	fileList;	//파일 목록 연결 리스트의 머리 노드
} ARCHIVE, *PARCHIVE;

```